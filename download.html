<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Download â€” ToppingXP</title>

<style>
:root{
  --bg:#0a0f0a; --grid:#142714; --g:#79ff79; --g-weak:#36c436; --g-deep:#1c7a1c;
  --scan:rgba(121,255,121,.06);
  --glow:0 0 10px rgba(121,255,121,.5),0 0 18px rgba(121,255,121,.25);
  --btn-bg:#0a140a; --btn-bg-hover:#0f1d0f;
  --text-soft:#b6ffb6; --text-hover:#d4f77c;
}
*{box-sizing:border-box}
html,body{height:100%; margin:0}
body{
  background: radial-gradient(1100px 700px at 50% 50%, #0b160b 0%, var(--bg) 60%);
  color:var(--g); font-family: ui-monospace, Menlo, Consolas, monospace;
  letter-spacing:.2px; font-size:16px; padding:40px 20px;
}

.container{max-width:900px; margin:0 auto}

.header{text-align:center; margin-bottom:60px}
.h1{font-size:clamp(32px,6vw,56px); font-weight:900; margin:0 0 16px; text-shadow:var(--glow)}
.sub{color:var(--text-soft); margin:0; font-size:clamp(16px,2.5vw,20px); line-height:1.6}

.card{
  background:rgba(8,18,8,.65);
  border:2px solid var(--g-deep);
  box-shadow:0 0 24px rgba(0,0,0,.4), inset 0 0 0 2px rgba(28,122,28,.15);
  backdrop-filter: blur(6px);
  border-radius:12px;
  padding:32px;
  margin-bottom:32px;
}

.card h2{
  font-size:clamp(24px,4vw,32px); font-weight:800; margin:0 0 12px;
  text-shadow:var(--glow);
}
.card p{color:var(--text-soft); line-height:1.7; margin:0 0 20px}

.download-btn{
  display:inline-flex; align-items:center; gap:12px;
  padding:16px 32px; border:2px solid var(--g);
  background:var(--btn-bg); color:var(--text-soft);
  font-weight:800; cursor:pointer; box-shadow:var(--glow);
  border-radius:10px; font-size:18px; text-decoration:none;
  font-family:inherit; transition:all 0.2s;
}
.download-btn:hover{
  background:var(--btn-bg-hover); color:var(--text-hover);
  transform:translateY(-2px);
}
.download-btn .icon{font-size:24px}

.version-info{
  display:flex; gap:20px; flex-wrap:wrap; margin-top:20px;
  font-size:14px; color:var(--text-soft);
}
.version-info div{
  padding:8px 14px; background:rgba(28,122,28,0.2);
  border:1px solid var(--g-deep); border-radius:6px;
}

.features{
  display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));
  gap:20px; margin-top:24px;
}
.feature{
  padding:16px; background:rgba(28,122,28,0.1);
  border:1px solid var(--g-deep); border-radius:8px;
}
.feature-title{font-weight:800; margin-bottom:8px; color:var(--g)}
.feature-desc{font-size:14px; color:var(--text-soft); line-height:1.6}

.loading{text-align:center; padding:40px; color:var(--text-soft)}

.back-link{
  display:inline-block; padding:12px 24px;
  border:2px solid rgba(122,255,122,0.6);
  background:rgba(10,20,10,.85); color:var(--text-soft);
  text-decoration:none; font-weight:700;
  border-radius:8px; transition:all 0.2s;
}
.back-link:hover{
  background:rgba(15,29,15,.95); color:var(--text-hover);
  border-color:var(--g);
}

.note{
  margin-top:20px; padding:16px; background:rgba(255,200,0,0.1);
  border:1px solid rgba(255,200,0,0.3); border-radius:8px;
  font-size:14px; color:#ffd966;
}

@media(max-width:600px){
  body{padding:20px 16px}
  .card{padding:20px}
  .features{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1 class="h1">Download ToppingXP</h1>
    <p class="sub">Windows ë°ìŠ¤í¬í†± ìœ„ì ¯ìœ¼ë¡œ í•­ìƒ í™”ë©´ì— í‘œì‹œí•˜ì„¸ìš”</p>
  </div>

  <!-- Windows ìœ„ì ¯ -->
  <div class="card" id="windowsCard">
    <h2>ğŸªŸ Windows Desktop Widget</h2>
    <p>Always-on-top ë°ìŠ¤í¬í†± ìœ„ì ¯ìœ¼ë¡œ ì–¸ì œë‚˜ í™”ë©´ì— í€˜ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <div id="downloadSection" class="loading">
      ë¦´ë¦¬ì¦ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
    </div>

    <div class="features">
      <div class="feature">
        <div class="feature-title">âš¡ Always on Top</div>
        <div class="feature-desc">ë‹¤ë¥¸ ì°½ ìœ„ì— í•­ìƒ í‘œì‹œ</div>
      </div>
      <div class="feature">
        <div class="feature-title">ğŸ¨ Frameless Design</div>
        <div class="feature-desc">ê¹”ë”í•œ í…Œë‘ë¦¬ ì—†ëŠ” ë””ìì¸</div>
      </div>
      <div class="feature">
        <div class="feature-title">ğŸ“ Resizable</div>
        <div class="feature-desc">ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ ê°€ëŠ¥</div>
      </div>
      <div class="feature">
        <div class="feature-title">ğŸ”„ Auto Sync</div>
        <div class="feature-desc">ì›¹ê³¼ ìë™ ë™ê¸°í™”</div>
      </div>
    </div>
  </div>

  <!-- ì›¹ ì•± -->
  <div class="card">
    <h2>ğŸŒ Web App</h2>
    <p>ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ PWAë¡œ ì„¤ì¹˜í•˜ì„¸ìš”.</p>

    <a href="/" class="download-btn">
      <span class="icon">ğŸš€</span>
      <span>ì›¹ ì•± ì‹œì‘í•˜ê¸°</span>
    </a>

    <div class="note">
      ğŸ’¡ Chrome, Edge, Safariì—ì„œ ì£¼ì†Œì°½ì˜ ì„¤ì¹˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ PWAë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
  </div>

  <div style="text-align:center; margin-top:40px">
    <a href="/" class="back-link">â† í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
</div>

<script>
// GitHub Releases APIë¡œ ìµœì‹  ë¦´ë¦¬ì¦ˆ ê°€ì ¸ì˜¤ê¸°
async function loadLatestRelease(){
  const section = document.getElementById('downloadSection');

  try {
    const response = await fetch('https://api.github.com/repos/sungeunstar/toppingxp/releases/latest');

    if(!response.ok){
      throw new Error('Failed to fetch releases');
    }

    const release = await response.json();

    // .exe íŒŒì¼ ì°¾ê¸°
    const exeAsset = release.assets.find(asset => asset.name.endsWith('.exe'));

    if(!exeAsset){
      section.innerHTML = `
        <p style="color:#ff8888">ì•„ì§ ë¹Œë“œëœ ë¦´ë¦¬ì¦ˆê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        <a href="https://github.com/sungeunstar/toppingxp/releases" target="_blank" class="download-btn" style="margin-top:20px">
          <span class="icon">ğŸ“¦</span>
          <span>GitHub Releases ë³´ê¸°</span>
        </a>
      `;
      return;
    }

    // ë²„ì „ ì •ë³´
    const version = release.tag_name;
    const publishedDate = new Date(release.published_at).toLocaleDateString('ko-KR');
    const fileSize = (exeAsset.size / (1024 * 1024)).toFixed(1);

    section.innerHTML = `
      <a href="${exeAsset.browser_download_url}" class="download-btn">
        <span class="icon">â¬‡ï¸</span>
        <span>ë‹¤ìš´ë¡œë“œ ${exeAsset.name}</span>
      </a>

      <div class="version-info">
        <div>ğŸ“Œ ë²„ì „: ${version}</div>
        <div>ğŸ“… ë¦´ë¦¬ì¦ˆ: ${publishedDate}</div>
        <div>ğŸ’¾ í¬ê¸°: ${fileSize} MB</div>
        <div>â¬‡ï¸ ${exeAsset.download_count.toLocaleString()} ë‹¤ìš´ë¡œë“œ</div>
      </div>

      ${release.body ? `
      <div style="margin-top:24px; padding:16px; background:rgba(28,122,28,0.1); border:1px solid var(--g-deep); border-radius:8px">
        <div style="font-weight:800; margin-bottom:12px; color:var(--g)">ğŸ“ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸</div>
        <div style="font-size:14px; color:var(--text-soft); white-space:pre-wrap">${release.body}</div>
      </div>
      ` : ''}

      <div style="margin-top:20px; font-size:13px; color:var(--text-soft)">
        <a href="https://github.com/sungeunstar/toppingxp/releases" target="_blank" style="color:var(--text-hover); text-decoration:underline">
          ì´ì „ ë²„ì „ ë³´ê¸° â†’
        </a>
      </div>
    `;

  } catch(error){
    console.error('Error loading release:', error);
    section.innerHTML = `
      <p style="color:#ff8888">ë¦´ë¦¬ì¦ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>
      <a href="https://github.com/sungeunstar/toppingxp/releases" target="_blank" class="download-btn" style="margin-top:20px">
        <span class="icon">ğŸ”—</span>
        <span>GitHubì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œ</span>
      </a>
    `;
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
loadLatestRelease();
</script>

</body>
</html>
